<html xmlns="http://www.w3.org/2000/xhtml">
  <head>
    <script type="text/javascript" src="/engine/polyominos.js"></script>
    <script type="text/javascript" src="/engine/utilities.js"></script>
    <script type="text/javascript" src="/engine/puzzle.js"></script>
    <script type="text/javascript" src="/engine/validate.js"></script>
    <script type="text/javascript" src="/engine/svg.js"></script>
    <script type="text/javascript" src="/engine/display2.js"></script>
  </head>
  <body>
    <svg id="puzzle"></svg>
  </body>
  <script>
    window.onload = function() {
      var result = document.createElement('p')
      result.id = 'result'
      try {
        var solution = Puzzle.deserialize({{ solution|tojson }})
        validate(solution)
        result.valid = solution.valid
        solution.clearLines()
        draw(solution)
      } catch (e) {
        result.valid = false
        result.reason = e.getMessage()
      }

      document.body.append(result)
    }
  </script>
</html>
